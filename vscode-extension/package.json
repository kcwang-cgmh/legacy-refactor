{
  "name": "legacy-refactor-helper",
  "displayName": "Legacy Refactor Helper",
  "description": "側邊欄 GUI 協助操作 legacy code 遷移工作流程",
  "version": "0.1.4",
  "publisher": "legacy-refactor-team",
  "engines": {
    "vscode": "^1.90.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "workspaceContains:legacy-codes",
    "onView:legacyRefactor.prerequisites",
    "onView:legacyRefactor.projects",
    "onChatParticipant:legacy-refactor-team.legacy-refactor"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "legacy-refactor",
          "title": "Legacy Refactor",
          "icon": "resources/icons/refactor.svg"
        }
      ]
    },
    "views": {
      "legacy-refactor": [
        {
          "id": "legacyRefactor.prerequisites",
          "name": "環境需求"
        },
        {
          "id": "legacyRefactor.projects",
          "name": "專案"
        }
      ]
    },
    "commands": [
      {
        "command": "legacyRefactor.analyze",
        "title": "分析舊專案",
        "icon": "$(play)"
      },
      {
        "command": "legacyRefactor.plan",
        "title": "產出遷移計畫",
        "icon": "$(play)"
      },
      {
        "command": "legacyRefactor.start",
        "title": "開始遷移",
        "icon": "$(play)"
      },
      {
        "command": "legacyRefactor.preview",
        "title": "檢視報告",
        "icon": "$(open-preview)"
      },
      {
        "command": "legacyRefactor.refresh",
        "title": "重新整理",
        "icon": "$(refresh)"
      },
      {
        "command": "legacyRefactor.openSettings",
        "title": "模型設定",
        "icon": "$(gear)"
      },
      {
        "command": "legacyRefactor.importProject",
        "title": "匯入舊專案",
        "icon": "$(add)"
      },
      {
        "command": "legacyRefactor.checkPrerequisites",
        "title": "重新檢查環境",
        "icon": "$(refresh)"
      },
      {
        "command": "legacyRefactor.openFixUrl",
        "title": "開啟安裝頁面"
      }
    ],
    "viewsWelcome": [
      {
        "view": "legacyRefactor.projects",
        "contents": "尚未偵測到舊專案。\n請將專案資料夾放入 legacy-codes/ 目錄，或點擊下方按鈕匯入。\n[匯入舊專案](command:legacyRefactor.importProject)"
      }
    ],
    "chatParticipants": [
      {
        "id": "legacy-refactor-team.legacy-refactor",
        "name": "legacy-refactor",
        "fullName": "Legacy Refactor Helper",
        "description": "分析舊專案並產出遷移計畫",
        "isSticky": true,
        "commands": [
          {
            "name": "analyze",
            "description": "分析舊專案，產出分析報告"
          },
          {
            "name": "plan",
            "description": "根據分析報告產出遷移計畫"
          },
          {
            "name": "start",
            "description": "執行遷移計畫"
          }
        ]
      }
    ],
    "configuration": {
      "title": "Legacy Refactor",
      "properties": {
        "legacyRefactor.qualityModel": {
          "type": "string",
          "default": "claude-opus-4.6",
          "enum": [
            "claude-opus-4.6",
            "claude-sonnet-4.6",
            "claude-haiku-4.5",
            "gpt-5.3-codex",
            "gpt-5-mini",
            "gemini-3-flash-preview",
            "gemini-3.1-pro-preview"
          ],
          "description": "用於分析(analyze)與規劃(plan)的模型，品質優先"
        },
        "legacyRefactor.speedModel": {
          "type": "string",
          "default": "claude-sonnet-4.6",
          "enum": [
            "claude-opus-4.6",
            "claude-sonnet-4.6",
            "claude-haiku-4.5",
            "gpt-5.3-codex",
            "gpt-5-mini",
            "gemini-3-flash-preview",
            "gemini-3.1-pro-preview"
          ],
          "description": "用於執行遷移(start)的模型，速度優先"
        }
      }
    },
    "menus": {
      "view/title": [
        {
          "command": "legacyRefactor.checkPrerequisites",
          "when": "view == legacyRefactor.prerequisites",
          "group": "navigation"
        },
        {
          "command": "legacyRefactor.refresh",
          "when": "view == legacyRefactor.projects",
          "group": "navigation"
        },
        {
          "command": "legacyRefactor.openSettings",
          "when": "view == legacyRefactor.projects",
          "group": "navigation"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "lint": "eslint src --ext ts",
    "package": "vsce package",
    "release": "standard-version",
    "release:minor": "standard-version --release-as minor",
    "release:major": "standard-version --release-as major",
    "release:dry": "standard-version --dry-run"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/vscode": "^1.90.0",
    "@vscode/vsce": "^3.0.0",
    "standard-version": "^9.5.0",
    "typescript": "^5.3.0"
  }
}
